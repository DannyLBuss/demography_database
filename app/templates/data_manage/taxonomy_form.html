{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Demography Database - Data Input{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Data Input Form</h1>
    
    <h3><a href="" onclick="goBack()"> <span class="glyphicon glyphicon-circle-arrow-left"></span> Go back to previous page - changes will NOT be saved</a></h3>
    
    {% if publication %}
    <h3><strong>Publication:</strong> {{publication.authors}} </h3>
    {% endif %}
    
    {% if species %}
    <h3><strong>Species:</strong> <i>{{species.species_accepted}}</i></h3>
    {% endif %}
    
    {% if population %}
    <h3><strong>Population:</strong> {{population.population_name}}</h3>    
    {% endif %}
    
</div>
<form method="post" role="form">
    <div class="form">
        {{ form.hidden_tag() }}
        {{ wtf.form_errors(form, hiddens="only") }}
    </div>
<div class="form">
    <div class="info_box">            
        {{ wtf.form_field(form.authority) }}
        <p>{{ protocol_dict["taxonomy_authority"] }}</p>
        <hr>
        {{ wtf.form_field(form.tpl_version) }}
        <p>{{ protocol_dict["taxonomy_tpl_version"] }}</p>
        <hr>
        {{ wtf.form_field(form.infraspecies_accepted) }}
        <p>{{ protocol_dict["taxonomy_infraspecies_accepted"] }}</p>
        <hr>
        {{ wtf.form_field(form.species_epithet_accepted) }}
        <p>{{ protocol_dict["taxonomy_species_epithet_accepted"] }}</p>
        <hr>
        {{ wtf.form_field(form.genus_accepted) }}
        <p>{{ protocol_dict["taxonomy_genus_accepted"] }}</p>
        <hr>
        {{ wtf.form_field(form.genus) }}
        <p>{{ protocol_dict["taxonomy_genus"] }}</p>
        <hr>
        {{ wtf.form_field(form.family) }}
        <p>{{ protocol_dict["taxonomy_family"] }}</p>
        <hr>
        {{ wtf.form_field(form.tax_order) }}
        <p>{{ protocol_dict["taxonomy_order"] }}</p>
        <hr>
        {{ wtf.form_field(form.tax_class) }}
        <p>{{ protocol_dict["taxonomy_class"] }}</p>
        <hr>
        {{ wtf.form_field(form.phylum) }}
        <p>{{ protocol_dict["taxonomy_phylum"] }}</p>
        <hr>
        {{ wtf.form_field(form.kingdom) }}
        <p>{{ protocol_dict["taxonomy_kingdom"] }}</p>
        <hr>
        {{ wtf.form_field(form.col_check_ok) }}
        <p>{{ protocol_dict["taxonomy_col_check_ok"] }}</p>
        <hr>
        {{ wtf.form_field(form.col_check_date) }}
        <p>{{ protocol_dict["taxonomy_col_check_date"] }}</p>
    </div>


    <div class="info_box">
        <h3>Submit</h3>
        {{ wtf.form_field(form.submit) }}
    </div>
</div>
</form>

<script>
 
    function goBack() {
        window.history.go(-1);
    }
</script>


<script>
    // remove duplicate publications
    var seen = {};
    $('.remove_duplicates').each(function () {
        var txt = $(this).text();
        if (seen[txt]) $(this).remove();
        else seen[txt] = true;
    });
    var x = document.getElementsByClassName("remove_duplicates");
    var i;
    for (i = 0; i < x.length; i++) {
        x[i].style.visibility = "visible";
    }
</script>

{% endblock %}
